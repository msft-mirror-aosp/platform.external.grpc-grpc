package {
    default_applicable_licenses: ["external_grpc-grpc_third_party_upb_license"],
}

license {
    name: "external_grpc-grpc_third_party_upb_license",
    visibility: [":__subpackages__"],
    license_kinds: [
        "SPDX-license-identifier-BSD-3-Clause",
    ],
    license_text: [
        "LICENSE",
    ],
}

cc_library_headers {
    name: "libgrpc_third_party_upb_headers",
    defaults: ["grpc_deps_defaults"],
    export_include_dirs: [
        ".",
    ],
}

cc_library_static {
    name: "libgrpc_third_party_upb",
    defaults: ["grpc_deps_defaults"],
    srcs: [
        "upb/base/status.c",
        "upb/collections/array.c",
        "upb/collections/map.c",
        "upb/collections/map_sorter.c",
        "upb/hash/common.c",
        "upb/json/decode.c",
        "upb/json/encode.c",
        "upb/lex/atoi.c",
        "upb/lex/round_trip.c",
        "upb/lex/strtod.c",
        "upb/lex/unicode.c",
        "upb/mem/alloc.c",
        "upb/mem/arena.c",
        "upb/message/accessors.c",
        "upb/message/message.c",
        "upb/mini_table/common.c",
        "upb/mini_table/decode.c",
        "upb/mini_table/encode.c",
        "upb/mini_table/extension_registry.c",
        "upb/reflection/def_builder.c",
        "upb/reflection/def_pool.c",
        "upb/reflection/def_type.c",
        "upb/reflection/desc_state.c",
        "upb/reflection/enum_def.c",
        "upb/reflection/enum_reserved_range.c",
        "upb/reflection/enum_value_def.c",
        "upb/reflection/extension_range.c",
        "upb/reflection/field_def.c",
        "upb/reflection/file_def.c",
        "upb/reflection/message.c",
        "upb/reflection/message_def.c",
        "upb/reflection/message_reserved_range.c",
        "upb/reflection/method_def.c",
        "upb/reflection/oneof_def.c",
        "upb/reflection/service_def.c",
        "upb/text/encode.c",
        "upb/wire/decode.c",
        "upb/wire/decode_fast.c",
        "upb/wire/encode.c",
        "upb/wire/eps_copy_input_stream.c",
        "upb/wire/reader.c",
    ],
    cflags: [
        "-Wno-unused-parameter",
    ],
    static_libs: [
        "libgrpc_third_party_utf8_range",
        "libgrpc_upb_protos",
    ],
    export_include_dirs: [
        ".",
    ],
}
